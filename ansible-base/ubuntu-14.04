# Dockerfile with Ansible

# Latest Ubuntu LTS
FROM ubuntu:14.04
MAINTAINER @shrikeh <barney@shrikeh.net>
RUN apt-get update && \
    apt-get install --no-install-recommends -y software-properties-common && \
    apt-add-repository ppa:ansible/ansible && \
    apt-get update && \
    apt-get install -y ansible

RUN echo '[local]\nlocalhost\n' > /etc/ansible/hosts

# Add playbooks to the Docker image
ADD ansible-plays /srv/plays
WORKDIR /srv/plays

# Run Ansible to configure the Docker image
RUN ansible-playbook build.yml -c local
